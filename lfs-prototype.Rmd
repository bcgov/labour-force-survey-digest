---
title: "B.C. Labour Force Survey Highlights"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: scroll
    source_code: https://github.com/bcgov/labour-force-survey-digest
---

<!--
Copyright 2020 Province of British Columbia

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and limitations under the License.
-->

```{r setup, include=FALSE}
library(flexdashboard)
library(lubridate)
library(cansim)
library(janitor)
library(dplyr)
library(scales)
library(signs)
library(ggplot2)

# lf_character <- readRDS("tmp/lf_character.rds")

```


Employment
======================================================================

Row
-----------------------------------------------------------------------

### Reference Date {.value-box}

```{r}
#LFS month-year
valueBox(value = paste(month(Sys.Date() %m-% months(1), label = TRUE, abbr = FALSE), year(Sys.Date())),
         icon = "fa-calendar")
```


```{r}
all_month_change <- get_cansim_vector_for_latest_periods(c("all_employment" = "v2064701"), periods = 13) %>%
  normalize_cansim_values() %>%
  clean_names() %>%
  mutate(
    month_change = value - lag(value),
    month_change_percent = value / lag(value) - 1
  ) 
```


### Month Change in Employment {.value-box}

```{r}
#monthly value change in employment
recent_month_value_change <- all_month_change %>%
  filter(year(date) == year(Sys.Date()),
         month(date) == month(Sys.Date()) - 1) %>%
  pull(month_change) %>%
  signs(format = comma, add_plusses = TRUE)
  
valueBox(value = recent_month_value_change,
         icon = "fa-users-cog")
```

### % Month Change in Employment {.value-box}

```{r}
#monthly % change in employment
recent_month_perc_change <- all_month_change %>%
  filter(year(date) == year(Sys.Date()),
         month(date) == month(Sys.Date()) - 1) %>%
  pull(month_change_percent) %>%
  signs(format = percent, add_plusses = TRUE)
  
valueBox(value = recent_month_perc_change,
         icon = "fa-users-cog")
```



Row
-----------------------------------------------------------------------

### Chart A

```{r}

```

### Chart B

```{r}

```

### Chart A

```{r}

```

### Chart C

```{r}

```


Unemployment
======================================================================


About
======================================================================

The data presented are sourced from the [Statistics Canada Labour Force Survey (LFS)](https://www.statcan.gc.ca/eng/survey/household/3701), a monthly survey which measures the current state of the Canadian labour market. 
  
The data are released under the [Statistics Canada Open Licence](https://www.statcan.gc.ca/eng/reference/licence).
  
Labour Force Survey Tables: 

 - [Statistics Canada Table **14-10-0287-03**: Labour force characteristics by province, monthly, seasonally adjusted](https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1410028703)
 - [Statistics Canada Table **14-10-0288-01**: Employment by class of worker, monthly, seasonally adjusted and unadjusted, last 5 months](https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1410028801)
 - [Statistics Canada Table **14-10-0127-01**: Reason for not looking for work, monthly, unadjusted for seasonality](https://www150.statcan.gc.ca/t1/tbl1/en/tv.action?pid=1410012701&pickMembers%5B0%5D=1.11&pickMembers%5B1%5D=3.1&pickMembers%5B2%5D=4.1)

This report is built with the [`flexdashboard` R package](https://rmarkdown.rstudio.com/flexdashboard/), sourcing the Statistics Canada Labour Force Survey data using the [`cansim` R package](https://mountainmath.github.io/cansim/index.html). 
  
The [R](https://www.r-project.org/) code is available in bcgov GitHub [here](https://github.com/bcgov/labour-force-survey-digest), available under the [Apache 2.0 licence](https://github.com/bcgov/labour-force-survey-digest/blob/master/LICENSE).
